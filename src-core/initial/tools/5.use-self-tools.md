### **发布/更新自研工具**

===== **自研工具开发规范** =====
=====  1.**工具命名规范** =====
- 使用小写字母和连字符，如：`file-compress`、`data-analyzer`
- 名称应该简洁明了，反映工具的主要功能
- 避免使用特殊字符和空格

=====  2.**版本管理规范** =====
- 遵循语义化版本规范（Semantic Versioning）
- 格式：`主版本号.次版本号.修订号`
- 主版本号：不兼容的API修改
- 次版本号：向下兼容的功能性新增
- 修订号：向下兼容的问题修正

=====  3.**代码质量要求** =====
- 提供完整的错误处理
- 包含详细的文档字符串
- 遵循相应编程语言的编码规范
- 提供单元测试（推荐）

=====  4.**依赖管理** =====
- 明确声明所有依赖项
- 指定版本范围，避免版本冲突
- 优先使用稳定版本的依赖

=====  5.**示例和文档** =====
- 提供清晰的使用示例
- 说明参数的含义和格式
- 包含常见使用场景的示例
- 提供故障排除指南

=====  6.**更新规范** =====
- 更新时必须提供changelog说明变更内容
- 版本号必须递增
- 保持向后兼容性（除非是主版本更新）
- 更新后及时测试功能完整性


#### **set-self-tool**
- **描述**：用于发布新工具或更新已存在的工具到工具库中。
- **参数**：
  - `name`：工具名称，必须是唯一的标识符。
  - `description`：工具描述，说明工具的功能和用途。
  - `version`：工具版本号，遵循语义化版本规范。
  - `author`：工具作者信息。
  - `category`：工具分类，如：file-system、network、database等。
  - `tags`：工具标签，用于搜索和分类，多个标签用逗号分隔。
  - `code`：工具实现代码，支持多种编程语言。
  - `dependencies`：工具依赖项，JSON格式的依赖列表。
  - `examples`：使用示例，展示工具的具体用法。
  - `changelog`：版本更新日志（可选，仅在更新时提供）。
- **说明**：
  - 如果工具名称已存在，则执行更新操作
  - 如果工具名称不存在，则执行发布操作
  - 更新时版本号必须大于当前版本
- **示例1-创建工具**：
  ```xml
  <set-self-tool>
    <name>file-compress</name>
    <description>用于压缩和解压文件的工具，支持zip、tar、gz等格式</description>
    <version>1.0.0</version>
    <author>swiflow-team</author>
    <category>file-system</category>
    <tags>compress,archive,zip,tar</tags>
    <code>
      import zipfile
      import tarfile
      import os
      
      def compress_file(source_path, target_path, format='zip'):
          if format == 'zip':
              with zipfile.ZipFile(target_path, 'w') as zipf:
                  zipf.write(source_path, os.path.basename(source_path))
          elif format == 'tar':
              with tarfile.open(target_path, 'w:gz') as tarf:
                  tarf.add(source_path, arcname=os.path.basename(source_path))
    </code>
    <dependencies>
      {
        "python": ">=3.7",
        "packages": []
      }
    </dependencies>
    <examples>
      - 压缩单个文件：compress_file('data.txt', 'data.zip')
      - 压缩为tar格式：compress_file('folder', 'archive.tar.gz', 'tar')
    </examples>
  </set-self-tool>
  ```

- **示例2-更新工具**：
  ```xml
  <set-self-tool>
    <name>file-compress</name>
    <description>增加了批量压缩功能和进度显示</description>
    <version>1.1.0</version>
    <author>swiflow-team</author>
    <category>file-system</category>
    <tags>compress,archive,zip,tar,batch</tags>
    <code>
      # 更新后的代码实现，包含批量压缩功能
      import zipfile
      import tarfile
      import os
      from tqdm import tqdm
      
      def compress_files(file_list, target_path, format='zip'):
          if format == 'zip':
              with zipfile.ZipFile(target_path, 'w') as zipf:
                  for file_path in tqdm(file_list, desc="压缩进度"):
                      zipf.write(file_path, os.path.basename(file_path))
          elif format == 'tar':
              with tarfile.open(target_path, 'w:gz') as tarf:
                  for file_path in tqdm(file_list, desc="压缩进度"):
                      tarf.add(file_path, arcname=os.path.basename(file_path))
    </code>
    <dependencies>
      {
        "python": ">=3.7",
        "packages": ["tqdm>=4.0.0"]
      }
    </dependencies>
    <examples>
      - 压缩单个文件：compress_file('data.txt', 'data.zip')
      - 批量压缩：compress_files(['file1.txt', 'file2.txt'], 'archive.zip')
      - 压缩为tar格式：compress_file('folder', 'archive.tar.gz', 'tar')
    </examples>
    <changelog>
      - 新增批量压缩功能
      - 添加压缩进度显示
      - 修复大文件压缩内存占用问题
      - 新增tqdm依赖用于进度显示
    </changelog>
  </set-self-tool>
  ```

#### **use-self-tool**
- **描述**：用于调用已发布的自研工具。
- **参数**：
  - `uuid`：唯一标识符，用于在上下文中关联确认结果。
  - `name`：工具名称。
  - `version`：工具版本号（可选，默认使用最新版本）。
  - `parameters`：工具参数，JSON格式。
  - `timeout`：执行超时时间（秒），默认30秒。
- **示例**：
  ```xml
  <use-self-tool>
    <uuid>tool-2024-01-15-001</uuid>
    <name>file-compress</name>
    <version>1.0.0</version>
    <parameters>
      {
        "source_path": "data.txt",
        "target_path": "data.zip",
        "format": "zip"
      }
    </parameters>
    <timeout>60</timeout>
  </use-self-tool>
  ```

#### **publish-as-app**
- **描述**：将开发的程序发布到用户的快捷列表中，用户可以便捷的运行。
- **参数**：
  - `title`：程序名称，最好不要超过20个字。
  - `command`：程序的启动命令。
  - `address`：Web 应用的访问地址, 非必填。
- **示例**：
  ```xml
  <publish-as-app>
    <title>VitePress 博客演示</title>
    <command>vitepress dev</command>
    <address>http://localhost:5173</address>
  </publish-as-app>
  ```
- **说明**
