<!doctype html>
<html lang="en">
  <head>
    <title>SWIFLOW</title>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/assets/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src-front/main.ts"></script>
    <div id="global-loading" style="position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(255,255,255,0.95);z-index:9999;display:flex;align-items:center;justify-content:center;display:flex;">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:transparent;display:block;" width="120px" height="120px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
        <path fill="none" stroke="#ff6a00" stroke-width="4" stroke-dasharray="42.76482137044271 42.76482137044271" d="M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z" stroke-linecap="round" style="transform:scale(1);transform-origin:50px 50px">
          <animate attributeName="stroke-dashoffset" repeatCount="indefinite" dur="1.6666666666666667s" keyTimes="0;1" values="0;256.58892822265625"></animate>
        </path>
      </svg>
    </div>
    <script>
      window.addEventListener('DOMContentLoaded', function () {
        window.__removeLoading = function () {
          var _ = (id) => document.getElementById(id);
          var globalLoading = _('global-loading');
          if (globalLoading)globalLoading.remove();
          window.__initGtag && window.__initGtag();
        }
        // 初始化 Google Tag 的方法（与 window.__removeLoading 风格一致）
        window.__initGtag = function () {
          if (window.__gtagLoaded) return;

          const exists = document.querySelector('script[src*="gtag/js?id=G-T66E8LGLWT"]')
          const init = () => {
            window.dataLayer = window.dataLayer || []
            function gtag() { window.dataLayer.push(arguments) }
            window.gtag = gtag
            gtag('js', new Date())
            gtag('config', 'G-T66E8LGLWT')
            window.__gtagLoaded = true
          }

          if (exists) {
            return init()
          }

          const script = document.createElement('script')
          script.async = true
          script.onload = init
          script.src = 'https://www.googletagmanager.com/gtag/js?id=G-T66E8LGLWT'
          document.head.appendChild(script)
        }
      });
    </script>
  </body>
</html>
